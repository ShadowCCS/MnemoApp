<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:Mnemo.UI.Controls"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="400"
             x:Class="Mnemo.UI.Components.InputBuilder">

    <UserControl.Styles>
        <Style Selector="TextBox.InputArea">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardAccentBrush}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="MinHeight" Value="150"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Style Selector="^:focus /template/ Border#PART_BorderElement">
                <Setter Property="BorderThickness" Value="1.5"/>
                <Setter Property="BorderBrush" Value="{DynamicResource CardAccentBrush}"/>
            </Style>
        </Style>

        <Style Selector="Button.FileButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardAccentBrush}"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <Style Selector="Border.FileItem">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundSecondaryBrush}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
        </Style>
    </UserControl.Styles>

    <StackPanel Spacing="20">
        <StackPanel Spacing="8">
            <TextBlock Text="What do you want to learn?" 
                       FontSize="18" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBlock Text="Describe the topic or paste the core information below." 
                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
        </StackPanel>

        <TextBox Name="InputTextBox" 
                 Classes="InputArea"
                 Watermark="Paste text, instructions, or specific topics here..."/>

        <StackPanel Spacing="12">
            <TextBlock Text="Add Source Materials (Optional)" 
                       FontSize="14" FontWeight="Medium"
                       Foreground="{DynamicResource TextPrimaryBrush}"/>
            
            <ItemsControl Name="FilesItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Classes="FileItem">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <controls:SvgIcon SvgPath="avares://Mnemo.UI/Icons/Tabler/Used/Outlined/file-description.svg" 
                                                  Width="14" Height="14" Color="{DynamicResource CardAccentBrush}"/>
                                <TextBlock Text="{Binding}" FontSize="12" VerticalAlignment="Center"/>
                                <Button Click="RemoveFile_Click" Padding="4" Background="Transparent" BorderThickness="0">
                                    <controls:SvgIcon SvgPath="avares://Mnemo.UI/Icons/Tabler/Used/Outlined/x.svg" 
                                                      Width="12" Height="12" Color="{DynamicResource TextTertiaryBrush}"/>
                                </Button>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <Button Name="AddFileButton" Classes="FileButton" Click="AddFile_Click">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <controls:SvgIcon SvgPath="avares://Mnemo.UI/Icons/Tabler/Used/Outlined/file-plus.svg" 
                                      Width="16" Height="16" Color="{DynamicResource CardAccentBrush}"/>
                    <TextBlock Text="Upload Files" FontWeight="Medium" Foreground="{DynamicResource CardAccentBrush}"/>
                </StackPanel>
            </Button>
        </StackPanel>

        <Button Name="GenerateButton" 
                HorizontalAlignment="Stretch"
                Height="50"
                Background="{DynamicResource CardAccentBrush}"
                Foreground="White"
                CornerRadius="12"
                Click="Generate_Click">
            <TextBlock Text="Generate Learning Path" FontWeight="Bold" FontSize="16"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Button>
    </StackPanel>
</UserControl>

